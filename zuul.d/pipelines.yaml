- pipeline:
    name: pullrequest_label
    description: |
      fca-project test to return the label
    manager: independent
    trigger:
      github:
        - event: pull_request
          action:
            - opened
            - changed
    start:
      github:
        status: pending
        comment: false
    success:
      github:
        status: 'success'
        label: 'merge-ready'
      mysql:
    failure:
      github:
        status: 'failure'
        label: 'merge-not-ready'
      mysql:
      
- pipeline:
    name: checklabel_emea
    description: |
      region1 Newly opened pull requests originating from EMEA enter this pipeline to receive an
      initial verification test
    manager: independent
    trigger:
      github:
        - event: pull_request
          action:
            - opened
            - changed
    start:
      github:
        status: pending
        comment: false
    success:
      github:
        status: 'success'
        label: 'emea'
      mysql:
    failure:
      github:
        status: 'success'
      mysql:
       
- pipeline:
    name: checklabel_nafta
    description: |
      region2 Newly opened pull requests originating from NAFTA enter this pipeline to receive an
      initial verification test
    manager: independent
    trigger:
      github:
        - event: pull_request
          action:
            - opened
            - changed
    start:
      github:
        status: pending
        comment: false
    success:
      github:
        status: 'success'
        label: 'nafta'
      mysql:
    failure:
      github:
        status: 'success'
      mysql:
  
- pipeline:
    name: check_emea
    description: |
      region1 Newly opened pull requests originating from EMEA enter this pipeline to receive an
      initial verification test
    manager: independent
    trigger:
      github:
        - event: pull_request
          action: labeled
          label: emea       
    start:
      github:
        status: pending
        comment: false
    success:
      github:
        status: 'success'
        label: 'ready-for-merge'
      mysql:  
    failure:
      github:
        status: 'failure'
        label: 'failed'
      mysql:

- pipeline:
    name: check_nafta
    description: |
      region2 Newly opened pull requests originating from NAFTA enter this pipeline to receive an
      initial verification test
    manager: independent
    trigger:
       github:
        - event: pull_request
          action: labeled
          label: nafta      
    start:
      github:
        status: pending
        comment: false
    success:
      github:
        status: 'success'
        label: 'ready-for-merge'
      mysql:  
    failure:
      github:
        status: 'failure'
        label: 'failed'
      mysql:
      
- pipeline:
    name: merge
    description: |
       pull requests originating from any region,  enter this pipeline to merge into master  
    manager: independent
    trigger:
       github:
        - event: pull_request
          action: labeled
          label: ready-for-merge
    start:
      github:
        status: pending
        comment: false
    success:
      github:
        status: 'success'
        merge: true
        label: 'merged'
      mysql:  
    failure:
      github:
        status: 'failure'
        label: 'failed'
      mysql: 
      
- pipeline:
    name: gate
    description: |
       scheduled on a timer basis for pull requests which have been closed post merge
    manager: dependant   
    trigger:
      timer:
        - time: '*/5 * * * *'
    success:
      mysql:
    failure:
      mysql:
